input {
  gelf {
    host => "0.0.0.0"
    port => 12201
  }
  file {
    path => "/usr/share/logstash/ingest_data/*"
    start_position => "beginning"
  }
}

filter {
  if [host_name] and [host_name][name] {
    mutate {
      rename => { "[host_name][name]" => "host_name" }
    }
  }
  if [host] {
    mutate {
      rename => { "host" => "host_name" }
    }
  }
}


output {
  stdout { codec => rubydebug }
  elasticsearch {
    hosts => ["https://elasticsearch:9200"]
    index => "logstash-%{+YYYY.MM.dd}"
    user => "${ELASTIC_USER}"
    password => "${ELASTIC_PASSWORD}"
    ssl => true
    ssl_certificate_authorities => ["certs/ca/ca.crt"]
  }
}

